set global rds_audit_log_enabled = ON;
set global rds_audit_log_flush = on;
set global local_infile = on;
create table t1(id int primary key) engine = innodb;
create table auditlog(v varchar(1280));
create user xx1@'%';
grant all on test to xx1@'%';
create user xx2@'%';
grant all on test to xx2@'%';
create user xx3@'%';
grant all on test to xx3@'%';
create user xx4@'%';
grant all on test to xx4@'%';
create user xx5@'%';
grant all on test to xx5@'%';
insert into t1 values(1);
ERROR 28000: Access denied for user 'xx2'@'localhost' (using password: YES)
insert into t1 values(2);
insert into t1 values(3);
insert into t1 values(4);
insert into t1 values(5);
insert into t1 values(1);
ERROR 23000: Duplicate entry '1' for key 't1.PRIMARY'
insert into t1 values(6,6);
ERROR 21S01: Column count doesn't match value count at row 1
delete from t1;
create table t_long(name varchar(2096))engine=innodb;
insert into t_long values
("1234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456");
insert into t_long values
("12345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678");
insert into t_long values
("1234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678");
drop table t_long;
insert into t1 values(20);
insert into t1 values(19);
insert into t1 values(18);
insert into t1 values(17);
insert into t1 values(16);
insert into t1 values(15);
insert into t1 values(14);
insert into t1 values(13);
insert into t1 values(12);
insert into t1 values(11);
insert into t1 values(10);
insert into t1 values(9);
insert into t1 values(8);
insert into t1 values(7);
insert into t1 values(6);
insert into t1 values(5);
insert into t1 values(4);
insert into t1 values(3);
insert into t1 values(2);
insert into t1 values(1);
set autocommit=0;
update t1 set id = id + 20;
update t1 set id = id * 2 where id & 1 = 0;
select * from t1 where id = 17;
id
delete from t1 where id = 17;
select * from t1 where id = 17;
id
commit;
set autocommit=1;
set global rds_audit_log_event_buffer_size= 35;
SET GLOBAL event_scheduler=off;
create table event_test (id int) engine = innodb;
drop event if exists event1;
Warnings:
Note	1305	Event event1 does not exist
create event event1 on schedule every 1 second starts now() ends date_add(now(), interval 5 hour) DO insert into event_test values(1);
SET GLOBAL event_scheduler=ON;
SET GLOBAL event_scheduler=off;
drop table event_test;
drop event event1;
create table proc_test(id int) engine = innodb;
CREATE PROCEDURE proc1()
BEGIN
insert into proc_test values(1);
END
//
call proc1();
drop procedure proc1;
drop table proc_test;
create table t2(id int primary key auto_increment, code varchar(10)) engine = innodb;
insert into t2 (code) values("abc");
insert into t2 (code) select code from t2;
insert into t2 (code) select code from t2;
insert into t2 (code) select code from t2;
insert into t2 (code) select code from t2;
insert into t2 (code) select code from t2;
insert into t2 (code) select code from t2;
insert into t2 (code) select code from t2;
insert into t2 (code) select code from t2;
insert into t2 (code) select code from t2;
insert into t2 (code) select code from t2;
insert into t2 (code) select code from t2;
insert into t2 (code) select code from t2;
insert into t2 (code) select code from t2;
insert into t2 (code) select code from t2;
alter table t2 engine = innodb;
update t2 set code = '123' where id & 3 = 0;
update t2 set code = 'adb' where id & 3 = 1;
update t2 set code = 'ooo5' where id & 3 = 2;
update t2 set code = '##$' where id & 3 = 3;
create temporary table t3(id int) engine = innodb;
prepare t3_insert from "insert into t3 values(1)";
execute t3_insert;
SET @v0 = '2';
PREPARE stmt FROM 'UPDATE t3 SET id = ?';
EXECUTE stmt USING @v0;
DEALLOCATE PREPARE stmt;
drop table t3;
select * from t2 order by code desc;
delete from t2 where id & 1;
set global rds_audit_log_enabled = off;
set global rds_audit_log_enabled = on;
select count(*)>0 from auditlog where v like '%MYSQL_V1%' and v like '%xx%';
count(*)>0
1
select count(*)>0 from auditlog where v like '%insert into t2 (code) values("abc")%';
count(*)>0
1
select count(*)>0 from auditlog where v like '%xx1%' and v like '%login%';
count(*)>0
1
select count(*)>0 from auditlog where v like '%xx2%' and v like '%login%';
count(*)>0
1
select count(*)>0 from auditlog where v like '%xx3%' and v like '%login%';
count(*)>0
1
select count(*)>0 from auditlog where v like '%xx4%' and v like '%login%';
count(*)>0
1
select count(*)>0 from auditlog where v like '%xx5%' and v like '%login%';
count(*)>0
1
select count(*)>0 from auditlog where v like '%xx3%' and v like '%logout%';
count(*)>0
1
select count(*)>0 from auditlog where v like '%xx4%' and v like '%logout%';
count(*)>0
1
drop table t1;
drop table t2;
drop table auditlog;
drop user xx1@'%';
drop user xx2@'%';
drop user xx3@'%';
drop user xx4@'%';
drop user xx5@'%';
set global rds_audit_log_enabled = default;
set global rds_audit_log_event_buffer_size = default;
set global local_infile = default;
set global rds_audit_log_version = default;
SET GLOBAL event_scheduler=default;
